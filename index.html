<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Pengurusan Kokurikulum Sekolah</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .flow-arrow {
            position: absolute;
            width: 60px;
            height: 2px;
            background: linear-gradient(90deg, #6366f1, #8b5cf6);
            border-radius: 1px;
        }
        
        .flow-arrow::after {
            content: '';
            position: absolute;
            right: -8px;
            top: -4px;
            width: 0;
            height: 0;
            border-left: 10px solid #8b5cf6;
            border-top: 5px solid transparent;
            border-bottom: 5px solid transparent;
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <div class="gradient-bg text-white py-8 px-6">
        <div class="max-w-7xl mx-auto text-center">
            <div class="flex items-center justify-center mb-4">
                <svg class="w-12 h-12 mr-4" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"/>
                </svg>
                <h1 class="text-4xl font-bold">Sistem Pengurusan Kokurikulum Sekolah</h1>
            </div>
            <p class="text-xl opacity-90">Dashboard Pengurusan Aktiviti dan Pencapaian Pelajar</p>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div class="max-w-7xl mx-auto px-6 py-12">
        <!-- Legend -->
        <div class="flex justify-center mb-12">
            <div class="bg-white rounded-2xl shadow-lg p-6 flex items-center space-x-8">
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-blue-500 rounded-full mr-3"></div>
                    <span class="font-medium text-gray-700">Daftar (Register)</span>
                </div>
                <div class="flex items-center">
                    <div class="flow-arrow relative" style="width: 40px; top: 0;"></div>
                </div>
                <div class="flex items-center">
                    <div class="w-4 h-4 bg-purple-500 rounded-full mr-3"></div>
                    <span class="font-medium text-gray-700">Rekod (Record)</span>
                </div>
            </div>
        </div>

        <!-- Dashboard Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8 relative">
            <!-- Row 1: Daftar (Registers) -->
            <!-- Daftar Keahlian -->
            <div class="bg-white rounded-2xl shadow-lg p-6 card-hover border-l-4 border-emerald-500 relative">
                <div class="flex items-center mb-4">
                    <div class="bg-emerald-100 p-3 rounded-xl mr-4">
                        <svg class="w-8 h-8 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-800 text-lg">Daftar Keahlian</h3>
                        <p class="text-sm text-gray-600">Membership Register</p>
                    </div>
                </div>
                <p class="text-gray-600 text-sm mb-4">Pendaftaran ahli baru kokurikulum</p>
                
                <!-- Open Form Button -->
                <button onclick="openMembershipForm()" class="w-full bg-emerald-600 text-white px-4 py-3 rounded-lg hover:bg-emerald-700 transition-colors font-medium flex items-center justify-center space-x-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                    </svg>
                    <span>Daftar Ahli Baru</span>
                </button>
                
                <!-- Flow arrow to record -->
                <div class="flow-arrow" style="right: -68px; top: 50%; transform: translateY(-50%);"></div>
            </div>

            <!-- Daftar Kehadiran -->
            <div class="bg-white rounded-2xl shadow-lg p-6 card-hover border-l-4 border-blue-500 relative">
                <div class="flex items-center mb-4">
                    <div class="bg-blue-100 p-3 rounded-xl mr-4">
                        <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-800 text-lg">Daftar Kehadiran</h3>
                        <p class="text-sm text-gray-600">Attendance Register</p>
                    </div>
                </div>
                <p class="text-gray-600 text-sm mb-4">Pendaftaran kehadiran pelajar dalam aktiviti kokurikulum</p>
                
                <!-- Open Form Button -->
                <button onclick="openAttendanceForm()" class="w-full bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium flex items-center justify-center space-x-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                    </svg>
                    <span>Buka Daftar Kehadiran</span>
                </button>
                
                <!-- Flow arrow to record -->
                <div class="flow-arrow" style="right: -68px; top: 50%; transform: translateY(-50%);"></div>
            </div>

            <!-- Daftar Jawatankuasa Unit -->
            <div class="bg-white rounded-2xl shadow-lg p-6 card-hover border-l-4 border-orange-500 relative">
                <div class="flex items-center mb-4">
                    <div class="bg-orange-100 p-3 rounded-xl mr-4">
                        <svg class="w-8 h-8 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-800 text-lg">Daftar Jawatankuasa Unit</h3>
                        <p class="text-sm text-gray-600">Committee Register</p>
                    </div>
                </div>
                <p class="text-gray-600 text-sm mb-4">Pendaftaran jawatankuasa unit kokurikulum</p>
                
                <!-- Open Form Button -->
                <button onclick="openCommitteeForm()" class="w-full bg-orange-600 text-white px-4 py-3 rounded-lg hover:bg-orange-700 transition-colors font-medium flex items-center justify-center space-x-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                    </svg>
                    <span>Daftar Jawatankuasa</span>
                </button>
                
                <!-- Flow arrow to record -->
                <div class="flow-arrow" style="right: -68px; top: 50%; transform: translateY(-50%);"></div>
            </div>

            <!-- Daftar Laporan Mingguan -->
            <div class="bg-white rounded-2xl shadow-lg p-6 card-hover border-l-4 border-green-500 relative">
                <div class="flex items-center mb-4">
                    <div class="bg-green-100 p-3 rounded-xl mr-4">
                        <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-800 text-lg">Daftar Laporan Mingguan</h3>
                        <p class="text-sm text-gray-600">Weekly Report Register</p>
                    </div>
                </div>
                <p class="text-gray-600 text-sm">Pendaftaran laporan aktiviti mingguan</p>
                <!-- Flow arrow to record -->
                <div class="flow-arrow" style="right: -68px; top: 50%; transform: translateY(-50%);"></div>
            </div>

            <!-- Daftar Jadual Aktiviti Tahunan Unit -->
            <div class="bg-white rounded-2xl shadow-lg p-6 card-hover border-l-4 border-indigo-500 relative">
                <div class="flex items-center mb-4">
                    <div class="bg-indigo-100 p-3 rounded-xl mr-4">
                        <svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-800 text-lg">Daftar Jadual Aktiviti Tahunan Unit</h3>
                        <p class="text-sm text-gray-600">Annual Activity Schedule Register</p>
                    </div>
                </div>
                <p class="text-gray-600 text-sm mb-4">Pendaftaran jadual aktiviti tahunan unit</p>
                
                <!-- Open Form Button -->
                <button onclick="openScheduleForm()" class="w-full bg-indigo-600 text-white px-4 py-3 rounded-lg hover:bg-indigo-700 transition-colors font-medium flex items-center justify-center space-x-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                    </svg>
                    <span>Daftar Jadual Aktiviti</span>
                </button>
                
                <!-- Flow arrow to record -->
                <div class="flow-arrow" style="right: -68px; top: 50%; transform: translateY(-50%);"></div>
            </div>

            <!-- Daftar Akaun Kewangan dan Perbelanjaan Unit -->
            <div class="bg-white rounded-2xl shadow-lg p-6 card-hover border-l-4 border-yellow-500 relative">
                <div class="flex items-center mb-4">
                    <div class="bg-yellow-100 p-3 rounded-xl mr-4">
                        <svg class="w-8 h-8 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-800 text-lg">Daftar Akaun Kewangan dan Perbelanjaan Unit</h3>
                        <p class="text-sm text-gray-600">Financial Account & Expenditure Register</p>
                    </div>
                </div>
                <p class="text-gray-600 text-sm mb-4">Pendaftaran akaun kewangan dan perbelanjaan unit</p>
                
                <!-- Open Form Button -->
                <button onclick="openFinancialForm()" class="w-full bg-yellow-600 text-white px-4 py-3 rounded-lg hover:bg-yellow-700 transition-colors font-medium flex items-center justify-center space-x-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                    </svg>
                    <span>Daftar Transaksi</span>
                </button>
                
                <!-- Flow arrow to record -->
                <div class="flow-arrow" style="right: -68px; top: 50%; transform: translateY(-50%);"></div>
            </div>

            <!-- Daftar Pencapaian Murid -->
            <div class="bg-white rounded-2xl shadow-lg p-6 card-hover border-l-4 border-pink-500 relative">
                <div class="flex items-center mb-4">
                    <div class="bg-pink-100 p-3 rounded-xl mr-4">
                        <svg class="w-8 h-8 text-pink-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-800 text-lg">Daftar Pencapaian Murid</h3>
                        <p class="text-sm text-gray-600">Student Achievement Register</p>
                    </div>
                </div>
                <p class="text-gray-600 text-sm">Pendaftaran pencapaian dan prestasi pelajar</p>
                <!-- Flow arrow to record -->
                <div class="flow-arrow" style="right: -68px; top: 50%; transform: translateY(-50%);"></div>
            </div>

            <!-- Row 2: Rekod (Records) -->
            <!-- Rekod Keahlian -->
            <div class="bg-white rounded-2xl shadow-lg p-6 card-hover border-l-4 border-cyan-500">
                <div class="flex items-center mb-4">
                    <div class="bg-cyan-100 p-3 rounded-xl mr-4">
                        <svg class="w-8 h-8 text-cyan-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 515.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 919.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-800 text-lg">Rekod Keahlian</h3>
                        <p class="text-sm text-gray-600">Membership Record</p>
                    </div>
                </div>
                <p class="text-gray-600 text-sm mb-4">Senarai ahli dan maklumat keahlian</p>
                
                <!-- View Records Button -->
                <button onclick="openMembershipRecords()" class="w-full bg-cyan-600 text-white px-4 py-3 rounded-lg hover:bg-cyan-700 transition-colors font-medium flex items-center justify-center space-x-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                    </svg>
                    <span>Lihat Rekod Keahlian</span>
                </button>
            </div>

            <!-- Rekod Kehadiran -->
            <div class="bg-white rounded-2xl shadow-lg p-6 card-hover border-l-4 border-purple-500">
                <div class="flex items-center mb-4">
                    <div class="bg-purple-100 p-3 rounded-xl mr-4">
                        <svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-800 text-lg">Rekod Kehadiran</h3>
                        <p class="text-sm text-gray-600">Attendance Record</p>
                    </div>
                </div>
                <p class="text-gray-600 text-sm mb-4">Rekod dan analisis kehadiran pelajar</p>
                
                <!-- View Records Button -->
                <button onclick="openAttendanceRecords()" class="w-full bg-purple-600 text-white px-4 py-3 rounded-lg hover:bg-purple-700 transition-colors font-medium flex items-center justify-center space-x-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                    </svg>
                    <span>Lihat Rekod Kehadiran</span>
                </button>
            </div>

            <!-- Rekod Jawatankuasa Unit -->
            <div class="bg-white rounded-2xl shadow-lg p-6 card-hover border-l-4 border-red-500">
                <div class="flex items-center mb-4">
                    <div class="bg-red-100 p-3 rounded-xl mr-4">
                        <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-800 text-lg">Rekod Jawatankuasa Unit</h3>
                        <p class="text-sm text-gray-600">Committee Record</p>
                    </div>
                </div>
                <p class="text-gray-600 text-sm mb-4">Senarai jawatankuasa dan struktur organisasi</p>
                
                <!-- View Records Button -->
                <button onclick="openCommitteeRecords()" class="w-full bg-red-600 text-white px-4 py-3 rounded-lg hover:bg-red-700 transition-colors font-medium flex items-center justify-center space-x-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                    </svg>
                    <span>Lihat Rekod Jawatankuasa</span>
                </button>
            </div>

            <!-- Rekod Jadual Aktiviti Tahunan Unit -->
            <div class="bg-white rounded-2xl shadow-lg p-6 card-hover border-l-4 border-teal-500">
                <div class="flex items-center mb-4">
                    <div class="bg-teal-100 p-3 rounded-xl mr-4">
                        <svg class="w-8 h-8 text-teal-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-800 text-lg">Rekod Jadual Aktiviti Tahunan Unit</h3>
                        <p class="text-sm text-gray-600">Annual Activity Schedule Record</p>
                    </div>
                </div>
                <p class="text-gray-600 text-sm mb-4">Rekod dan kalendar aktiviti tahunan</p>
                
                <!-- View Records Button -->
                <button onclick="openScheduleRecords()" class="w-full bg-teal-600 text-white px-4 py-3 rounded-lg hover:bg-teal-700 transition-colors font-medium flex items-center justify-center space-x-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                    </svg>
                    <span>Lihat Rekod Jadual</span>
                </button>
            </div>

            <!-- Rekod Akaun Kewangan dan Perbelanjaan Unit -->
            <div class="bg-white rounded-2xl shadow-lg p-6 card-hover border-l-4 border-amber-500">
                <div class="flex items-center mb-4">
                    <div class="bg-amber-100 p-3 rounded-xl mr-4">
                        <svg class="w-8 h-8 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-800 text-lg">Rekod Akaun Kewangan dan Perbelanjaan Unit</h3>
                        <p class="text-sm text-gray-600">Financial Account & Expenditure Record</p>
                    </div>
                </div>
                <p class="text-gray-600 text-sm mb-4">Rekod dan analisis kewangan unit</p>
                
                <!-- View Records Button -->
                <button onclick="openFinancialRecords()" class="w-full bg-amber-600 text-white px-4 py-3 rounded-lg hover:bg-amber-700 transition-colors font-medium flex items-center justify-center space-x-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                    </svg>
                    <span>Lihat Rekod Kewangan</span>
                </button>
            </div>

            <!-- Rekod Laporan Mingguan -->
            <div class="bg-white rounded-2xl shadow-lg p-6 card-hover border-l-4 border-indigo-500">
                <div class="flex items-center mb-4">
                    <div class="bg-indigo-100 p-3 rounded-xl mr-4">
                        <svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-800 text-lg">Rekod Laporan Mingguan</h3>
                        <p class="text-sm text-gray-600">Weekly Report Record</p>
                    </div>
                </div>
                <p class="text-gray-600 text-sm">Rekod dan statistik laporan mingguan</p>
            </div>

            <!-- Rekod Pencapaian Murid -->
            <div class="bg-white rounded-2xl shadow-lg p-6 card-hover border-l-4 border-pink-500">
                <div class="flex items-center mb-4">
                    <div class="bg-pink-100 p-3 rounded-xl mr-4">
                        <svg class="w-8 h-8 text-pink-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="font-semibold text-gray-800 text-lg">Rekod Pencapaian Murid</h3>
                        <p class="text-sm text-gray-600">Student Achievement Record</p>
                    </div>
                </div>
                <p class="text-gray-600 text-sm">Rekod dan portfolio pencapaian pelajar</p>
            </div>
        </div>

        <!-- School Elements -->
        <div class="mt-16 text-center">
            <div class="flex justify-center items-center space-x-8 text-6xl opacity-20">
                üìö üë®‚Äçüéì üë©‚Äçüéì üìã üèÜ üìä üéØ üìù
            </div>
        </div>

        <!-- Footer Info -->
        <div class="mt-12 bg-white rounded-2xl shadow-lg p-8">
            <div class="text-center">
                <h3 class="text-2xl font-bold text-gray-800 mb-4">Cara Penggunaan Sistem</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-8">
                    <div class="text-left">
                        <h4 class="font-semibold text-lg text-blue-600 mb-3">üìù Daftar (Register)</h4>
                        <ul class="space-y-2 text-gray-600">
                            <li>‚Ä¢ Pendaftaran data awal</li>
                            <li>‚Ä¢ Input maklumat baru</li>
                            <li>‚Ä¢ Pengesahan data</li>
                            <li>‚Ä¢ Proses kemasukan</li>
                        </ul>
                    </div>
                    <div class="text-left">
                        <h4 class="font-semibold text-lg text-purple-600 mb-3">üìä Rekod (Record)</h4>
                        <ul class="space-y-2 text-gray-600">
                            <li>‚Ä¢ Penyimpanan data</li>
                            <li>‚Ä¢ Analisis dan laporan</li>
                            <li>‚Ä¢ Pemantauan prestasi</li>
                            <li>‚Ä¢ Arkib maklumat</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Attendance Form Modal -->
    <div id="attendanceModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto">
                <!-- Modal Header -->
                <div class="bg-blue-600 text-white p-6 rounded-t-2xl">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <svg class="w-8 h-8 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/>
                            </svg>
                            <div>
                                <h2 class="text-2xl font-bold">Borang Daftar Kehadiran</h2>
                                <p class="text-blue-100">Pendaftaran Kehadiran Pelajar Kokurikulum</p>
                            </div>
                        </div>
                        <button onclick="closeAttendanceForm()" class="text-white hover:text-gray-200 p-2">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Modal Content -->
                <div class="p-6">
                    <form id="attendanceForm" class="space-y-6">
                        <!-- Form Header -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Tarikh</label>
                                <input type="date" id="attendanceDate" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Aktiviti</label>
                                <select id="activityType" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                                    <option value="">Pilih Aktiviti</option>
                                    <option value="badminton">Badminton</option>
                                    <option value="bola-sepak">Bola Sepak</option>
                                    <option value="bola-keranjang">Bola Keranjang</option>
                                    <option value="kelab-sains">Kelab Sains</option>
                                    <option value="kelab-matematik">Kelab Matematik</option>
                                    <option value="kelab-bahasa">Kelab Bahasa</option>
                                    <option value="persatuan-sejarah">Persatuan Sejarah</option>
                                    <option value="kadet-polis">Kadet Polis</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Masa</label>
                                <input type="time" id="attendanceTime" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" required>
                            </div>
                        </div>

                        <!-- Student Registration Section -->
                        <div class="border-t pt-6">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4">Pendaftaran Kehadiran Pelajar</h4>
                            
                            <!-- Student Selection Method -->
                            <div class="bg-gray-50 rounded-lg p-4 mb-4 border border-gray-200">
                                <div class="flex items-center justify-between mb-4">
                                    <h5 class="font-medium text-gray-800">Pilih Kaedah Pendaftaran Pelajar</h5>
                                    <div class="flex bg-white rounded-lg p-1 border">
                                        <button type="button" id="selectFromListBtn" onclick="switchToSelectMode()" class="px-4 py-2 text-sm font-medium rounded-md bg-blue-600 text-white">
                                            üìã Pilih dari Senarai
                                        </button>
                                        <button type="button" id="manualEntryBtn" onclick="switchToManualMode()" class="px-4 py-2 text-sm font-medium rounded-md text-gray-600 hover:text-gray-800">
                                            ‚úèÔ∏è Input Manual
                                        </button>
                                    </div>
                                </div>

                                <!-- Select from List Mode -->
                                <div id="selectFromListMode" class="space-y-4">
                                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                                        <div class="flex items-center mb-3">
                                            <svg class="w-5 h-5 text-blue-600 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                            </svg>
                                            <span class="text-blue-800 font-medium text-sm">Senarai pelajar akan dipaparkan berdasarkan aktiviti yang dipilih</span>
                                        </div>
                                        <div id="studentListContainer" class="hidden">
                                            <h6 class="font-medium text-gray-700 mb-3">Senarai Ahli <span id="selectedActivityName"></span>:</h6>
                                            <div id="studentCheckboxList" class="grid grid-cols-1 md:grid-cols-2 gap-2 max-h-60 overflow-y-auto">
                                                <!-- Student checkboxes will be populated here -->
                                            </div>
                                            <div class="mt-4 flex justify-between items-center">
                                                <button type="button" onclick="selectAllStudents()" class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                                                    ‚úÖ Pilih Semua
                                                </button>
                                                <button type="button" onclick="clearAllStudents()" class="text-red-600 hover:text-red-800 text-sm font-medium">
                                                    ‚ùå Kosongkan Pilihan
                                                </button>
                                            </div>
                                        </div>
                                        <div id="noActivitySelected" class="text-center py-4 text-gray-500">
                                            <svg class="w-12 h-12 mx-auto mb-2 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                            </svg>
                                            <p class="text-sm">Sila pilih aktiviti terlebih dahulu untuk melihat senarai pelajar</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Manual Entry Mode -->
                                <div id="manualEntryMode" class="hidden">
                                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Nama Pelajar</label>
                                            <input type="text" id="studentName" placeholder="Nama penuh pelajar" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">No. K/P atau No. Pelajar</label>
                                            <input type="text" id="studentId" placeholder="123456-78-9012" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">Kelas</label>
                                            <select id="studentClass" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                                <option value="">Pilih Kelas</option>
                                                <option value="1A">Tingkatan 1A</option>
                                                <option value="1B">Tingkatan 1B</option>
                                                <option value="2A">Tingkatan 2A</option>
                                                <option value="2B">Tingkatan 2B</option>
                                                <option value="3A">Tingkatan 3A</option>
                                                <option value="3B">Tingkatan 3B</option>
                                                <option value="4A">Tingkatan 4A</option>
                                                <option value="4B">Tingkatan 4B</option>
                                                <option value="5A">Tingkatan 5A</option>
                                                <option value="5B">Tingkatan 5B</option>
                                            </select>
                                        </div>
                                        <div class="flex items-end">
                                            <button type="button" onclick="addStudentManually()" class="w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium">
                                                ‚ûï Tambah Pelajar
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Attendance List -->
                            <div class="bg-white rounded-lg border border-gray-200">
                                <div class="px-4 py-3 bg-gray-50 border-b border-gray-200 rounded-t-lg">
                                    <h5 class="font-medium text-gray-800">Senarai Kehadiran</h5>
                                </div>
                                <div id="attendanceList" class="p-4">
                                    <p class="text-gray-500 text-center py-8">Belum ada pelajar didaftarkan. Sila tambah pelajar di atas.</p>
                                </div>
                            </div>

                            <!-- Form Actions -->
                            <div class="flex justify-between items-center mt-6 pt-4 border-t border-gray-200">
                                <div class="text-sm text-gray-600">
                                    <span id="totalStudents">0</span> pelajar didaftarkan
                                </div>
                                <div class="space-x-3">
                                    <button type="button" onclick="clearForm()" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                                        üóëÔ∏è Kosongkan
                                    </button>
                                    <button type="submit" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium">
                                        üíæ Simpan Kehadiran
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Membership Form Modal -->
    <div id="membershipModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <!-- Modal Header -->
                <div class="bg-emerald-600 text-white p-6 rounded-t-2xl">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <svg class="w-8 h-8 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"/>
                            </svg>
                            <div>
                                <h2 class="text-2xl font-bold">Borang Daftar Keahlian</h2>
                                <p class="text-emerald-100">Pendaftaran Ahli Baru Kokurikulum</p>
                            </div>
                        </div>
                        <button onclick="closeMembershipForm()" class="text-white hover:text-gray-200 p-2">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Modal Content -->
                <div class="p-6">
                    <form id="membershipForm" class="space-y-6">
                        <!-- Timestamp (Auto-generated) -->
                        <div class="bg-gray-100 rounded-lg p-4 border border-gray-300">
                            <div class="flex items-center">
                                <svg class="w-5 h-5 mr-2 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                                <span class="text-sm font-medium text-gray-700">Timestamp: </span>
                                <span id="memberTimestamp" class="text-sm text-gray-800 font-mono"></span>
                            </div>
                        </div>

                        <!-- Co-curricular Selection -->
                        <div class="bg-blue-50 rounded-lg p-6 border border-blue-200">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                                <svg class="w-5 h-5 mr-2 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>
                                </svg>
                                Pilihan Kokurikulum
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Jenis Kokurikulum *</label>
                                    <select id="memberCoCurricularType" onchange="updateUnitOptions()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500" required>
                                        <option value="">Pilih Jenis Kokurikulum</option>
                                        <option value="kelab-persatuan">Kelab dan Persatuan</option>
                                        <option value="sukan-permainan">Sukan dan Permainan</option>
                                        <option value="badan-beruniform">Badan Beruniform</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Unit *</label>
                                    <select id="memberUnit" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500" required disabled>
                                        <option value="">Pilih jenis kokurikulum dahulu</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Personal Information -->
                        <div class="bg-gray-50 rounded-lg p-6 border border-gray-200">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                                <svg class="w-5 h-5 mr-2 text-emerald-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                </svg>
                                Maklumat Peribadi Pelajar
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Tingkatan *</label>
                                    <select id="memberForm" onchange="updateClassOptions()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500" required>
                                        <option value="">Pilih Tingkatan</option>
                                        <option value="1">Tingkatan 1</option>
                                        <option value="2">Tingkatan 2</option>
                                        <option value="3">Tingkatan 3</option>
                                        <option value="4">Tingkatan 4</option>
                                        <option value="5">Tingkatan 5</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Kelas *</label>
                                    <select id="memberClass" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500" required disabled>
                                        <option value="">Pilih tingkatan dahulu</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Nama Penuh *</label>
                                    <input type="text" id="memberName" placeholder="Nama penuh pelajar" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Jantina *</label>
                                    <select id="memberGender" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500" required>
                                        <option value="">Pilih Jantina</option>
                                        <option value="lelaki">Lelaki</option>
                                        <option value="perempuan">Perempuan</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">No. Kad Pengenalan *</label>
                                    <input type="text" id="memberId" placeholder="123456-78-9012" pattern="[0-9]{6}-[0-9]{2}-[0-9]{4}" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500" required>
                                    <p class="text-xs text-gray-500 mt-1">Format: 123456-78-9012</p>
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">No. Telefon Ibu/Bapa *</label>
                                    <input type="tel" id="memberParentPhone" placeholder="012-3456789" pattern="[0-9]{3}-[0-9]{7,8}" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500" required>
                                    <p class="text-xs text-gray-500 mt-1">Format: 012-3456789</p>
                                </div>
                            </div>
                        </div>

                        <!-- Form Actions -->
                        <div class="flex justify-between items-center pt-4 border-t border-gray-200">
                            <div class="text-sm text-gray-600">
                                * Medan wajib diisi
                            </div>
                            <div class="space-x-3">
                                <button type="button" onclick="clearMembershipForm()" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                                    üóëÔ∏è Kosongkan
                                </button>
                                <button type="submit" class="px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors font-medium">
                                    üíæ Daftar Ahli
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Membership Records Modal -->
    <div id="membershipRecordsModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-2xl shadow-2xl max-w-7xl w-full max-h-[90vh] overflow-y-auto">
                <!-- Modal Header -->
                <div class="bg-cyan-600 text-white p-6 rounded-t-2xl">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <svg class="w-8 h-8 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 515.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 919.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                            </svg>
                            <div>
                                <h2 class="text-2xl font-bold">Rekod Keahlian</h2>
                                <p class="text-cyan-100">Senarai Ahli Kokurikulum yang Berdaftar</p>
                            </div>
                        </div>
                        <button onclick="closeMembershipRecords()" class="text-white hover:text-gray-200 p-2">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Modal Content -->
                <div class="p-6">
                    <!-- Summary Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-emerald-50 p-4 rounded-lg border border-emerald-200">
                            <div class="text-emerald-600 text-sm font-medium">Jumlah Ahli</div>
                            <div class="text-2xl font-bold text-emerald-800" id="totalMembers">0</div>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                            <div class="text-blue-600 text-sm font-medium">Ahli Aktif</div>
                            <div class="text-2xl font-bold text-blue-800" id="activeMembers">0</div>
                        </div>
                        <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                            <div class="text-yellow-600 text-sm font-medium">Unit Terpopular</div>
                            <div class="text-lg font-bold text-yellow-800" id="popularActivity">-</div>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
                            <div class="text-purple-600 text-sm font-medium">Ahli Terbaru</div>
                            <div class="text-lg font-bold text-purple-800" id="latestMember">-</div>
                        </div>
                    </div>

                    <!-- Filter Section -->
                    <div class="bg-gray-50 rounded-lg p-4 mb-6 border border-gray-200">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">Penapis Rekod Keahlian</h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Jenis</label>
                                <select id="filterCoCurricularType" onchange="updateUnitFilter(); filterMembershipRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500">
                                    <option value="">Semua Jenis</option>
                                    <option value="kelab-persatuan">Kelab dan Persatuan</option>
                                    <option value="sukan-permainan">Sukan dan Permainan</option>
                                    <option value="badan-beruniform">Badan Beruniform</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Unit</label>
                                <select id="filterUnit" onchange="filterMembershipRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500">
                                    <option value="">Semua Unit</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Tingkatan</label>
                                <select id="filterForm" onchange="updateClassFilter(); filterMembershipRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500">
                                    <option value="">Semua Tingkatan</option>
                                    <option value="1">Tingkatan 1</option>
                                    <option value="2">Tingkatan 2</option>
                                    <option value="3">Tingkatan 3</option>
                                    <option value="4">Tingkatan 4</option>
                                    <option value="5">Tingkatan 5</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Kelas</label>
                                <select id="filterClass" onchange="filterMembershipRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500">
                                    <option value="">Semua Kelas</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Jantina</label>
                                <select id="filterGender" onchange="filterMembershipRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500">
                                    <option value="">Semua Jantina</option>
                                    <option value="lelaki">Lelaki</option>
                                    <option value="perempuan">Perempuan</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Cari Ahli</label>
                                <input type="text" id="searchMember" placeholder="Nama atau No. K/P" onkeyup="filterMembershipRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500">
                            </div>
                        </div>
                        <div class="mt-4 flex justify-end">
                            <button onclick="clearAllFilters()" class="text-cyan-600 hover:text-cyan-800 text-sm font-medium flex items-center space-x-1">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                                </svg>
                                <span>Kosongkan Semua Penapis</span>
                            </button>
                        </div>
                    </div>

                    <!-- Members List -->
                    <div class="bg-white rounded-lg border border-gray-200">
                        <div class="px-6 py-4 bg-gray-50 border-b border-gray-200 rounded-t-lg">
                            <h3 class="font-semibold text-gray-800 text-lg">Senarai Ahli Kokurikulum</h3>
                        </div>
                        <div id="membersList" class="p-6">
                            <div class="text-center py-12 text-gray-500">
                                <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 515.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 919.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                                </svg>
                                <p class="text-lg font-medium">Tiada ahli berdaftar lagi</p>
                                <p class="text-sm">Sila daftar ahli baru terlebih dahulu untuk melihat rekod di sini</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Committee Form Modal -->
    <div id="committeeModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <!-- Modal Header -->
                <div class="bg-orange-600 text-white p-6 rounded-t-2xl">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <svg class="w-8 h-8 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                            </svg>
                            <div>
                                <h2 class="text-2xl font-bold">Borang Daftar Jawatankuasa Unit</h2>
                                <p class="text-orange-100">Pendaftaran Ahli Jawatankuasa Kokurikulum</p>
                            </div>
                        </div>
                        <button onclick="closeCommitteeForm()" class="text-white hover:text-gray-200 p-2">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Modal Content -->
                <div class="p-6">
                    <form id="committeeForm" class="space-y-6">
                        <!-- Timestamp (Auto-generated) -->
                        <div class="bg-gray-100 rounded-lg p-4 border border-gray-300">
                            <div class="flex items-center">
                                <svg class="w-5 h-5 mr-2 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                                <span class="text-sm font-medium text-gray-700">Timestamp: </span>
                                <span id="committeeTimestamp" class="text-sm text-gray-800 font-mono"></span>
                            </div>
                        </div>

                        <!-- Unit Information -->
                        <div class="bg-orange-50 rounded-lg p-6 border border-orange-200">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                                <svg class="w-5 h-5 mr-2 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                                </svg>
                                Maklumat Unit
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Jenis Kokurikulum *</label>
                                    <select id="committeeCoCurricularType" onchange="updateCommitteeUnitOptions()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500" required>
                                        <option value="">Pilih Jenis Kokurikulum</option>
                                        <option value="kelab-persatuan">Kelab dan Persatuan</option>
                                        <option value="sukan-permainan">Sukan dan Permainan</option>
                                        <option value="badan-beruniform">Badan Beruniform</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Unit *</label>
                                    <select id="committeeUnit" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500" required disabled>
                                        <option value="">Pilih jenis kokurikulum dahulu</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Committee Member Information -->
                        <div class="bg-gray-50 rounded-lg p-6 border border-gray-200">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                                <svg class="w-5 h-5 mr-2 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                </svg>
                                Maklumat Ahli Jawatankuasa
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Jawatan *</label>
                                    <select id="committeePosition" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500" required>
                                        <option value="">Pilih Jawatan</option>
                                        <option value="pengerusi">Pengerusi</option>
                                        <option value="naib-pengerusi">Naib Pengerusi</option>
                                        <option value="setiausaha">Setiausaha</option>
                                        <option value="penolong-setiausaha">Penolong Setiausaha</option>
                                        <option value="bendahari">Bendahari</option>
                                        <option value="penolong-bendahari">Penolong Bendahari</option>
                                        <option value="ahli-jawatankuasa">Ahli Jawatankuasa</option>
                                        <option value="penasihat">Penasihat</option>
                                        <option value="guru-penyelia">Guru Penyelia</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Nama Penuh *</label>
                                    <input type="text" id="committeeName" placeholder="Nama penuh ahli jawatankuasa" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Tingkatan *</label>
                                    <select id="committeeForm" onchange="updateCommitteeClassOptions()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500" required>
                                        <option value="">Pilih Tingkatan</option>
                                        <option value="1">Tingkatan 1</option>
                                        <option value="2">Tingkatan 2</option>
                                        <option value="3">Tingkatan 3</option>
                                        <option value="4">Tingkatan 4</option>
                                        <option value="5">Tingkatan 5</option>
                                        <option value="guru">Guru</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Kelas *</label>
                                    <select id="committeeClass" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500" required disabled>
                                        <option value="">Pilih tingkatan dahulu</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Jantina *</label>
                                    <select id="committeeGender" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500" required>
                                        <option value="">Pilih Jantina</option>
                                        <option value="lelaki">Lelaki</option>
                                        <option value="perempuan">Perempuan</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">No. Kad Pengenalan *</label>
                                    <input type="text" id="committeeId" placeholder="123456-78-9012" pattern="[0-9]{6}-[0-9]{2}-[0-9]{4}" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500" required>
                                    <p class="text-xs text-gray-500 mt-1">Format: 123456-78-9012</p>
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">No. Telefon *</label>
                                    <input type="tel" id="committeePhone" placeholder="012-3456789" pattern="[0-9]{3}-[0-9]{7,8}" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500" required>
                                    <p class="text-xs text-gray-500 mt-1">Format: 012-3456789</p>
                                </div>
                            </div>
                        </div>

                        <!-- Form Actions -->
                        <div class="flex justify-between items-center pt-4 border-t border-gray-200">
                            <div class="text-sm text-gray-600">
                                * Medan wajib diisi
                            </div>
                            <div class="space-x-3">
                                <button type="button" onclick="clearCommitteeForm()" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                                    üóëÔ∏è Kosongkan
                                </button>
                                <button type="submit" class="px-6 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors font-medium">
                                    üíæ Daftar Jawatankuasa
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Schedule Form Modal -->
    <div id="scheduleModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <!-- Modal Header -->
                <div class="bg-indigo-600 text-white p-6 rounded-t-2xl">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <svg class="w-8 h-8 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                            <div>
                                <h2 class="text-2xl font-bold">Borang Daftar Jadual Aktiviti Tahunan Unit</h2>
                                <p class="text-indigo-100">Pendaftaran Jadual Aktiviti Tahunan Kokurikulum</p>
                            </div>
                        </div>
                        <button onclick="closeScheduleForm()" class="text-white hover:text-gray-200 p-2">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Modal Content -->
                <div class="p-6">
                    <form id="scheduleForm" class="space-y-6">
                        <!-- Timestamp (Auto-generated) -->
                        <div class="bg-gray-100 rounded-lg p-4 border border-gray-300">
                            <div class="flex items-center">
                                <svg class="w-5 h-5 mr-2 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                                <span class="text-sm font-medium text-gray-700">Timestamp: </span>
                                <span id="scheduleTimestamp" class="text-sm text-gray-800 font-mono"></span>
                            </div>
                        </div>

                        <!-- Unit Information -->
                        <div class="bg-indigo-50 rounded-lg p-6 border border-indigo-200">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                                <svg class="w-5 h-5 mr-2 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                                </svg>
                                Maklumat Unit
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Jenis Kokurikulum *</label>
                                    <select id="scheduleCoCurricularType" onchange="updateScheduleUnitOptions()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" required>
                                        <option value="">Pilih Jenis Kokurikulum</option>
                                        <option value="kelab-persatuan">Kelab dan Persatuan</option>
                                        <option value="sukan-permainan">Sukan dan Permainan</option>
                                        <option value="badan-beruniform">Badan Beruniform</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Unit *</label>
                                    <select id="scheduleUnit" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" required disabled>
                                        <option value="">Pilih jenis kokurikulum dahulu</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Tahun Akademik *</label>
                                    <select id="scheduleYear" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" required>
                                        <option value="">Pilih Tahun</option>
                                        <option value="2024">2024</option>
                                        <option value="2025">2025</option>
                                        <option value="2026">2026</option>
                                        <option value="2027">2027</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Activity Information -->
                        <div class="bg-gray-50 rounded-lg p-6 border border-gray-200">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                                <svg class="w-5 h-5 mr-2 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                </svg>
                                Maklumat Aktiviti
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Nama Aktiviti *</label>
                                    <input type="text" id="activityName" placeholder="Contoh: Mesyuarat Bulanan, Latihan Mingguan" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Jenis Aktiviti *</label>
                                    <select id="activityCategory" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" required>
                                        <option value="">Pilih Jenis Aktiviti</option>
                                        <option value="mesyuarat">Mesyuarat</option>
                                        <option value="latihan">Latihan</option>
                                        <option value="pertandingan">Pertandingan</option>
                                        <option value="program">Program Khas</option>
                                        <option value="kursus">Kursus/Workshop</option>
                                        <option value="kempen">Kempen</option>
                                        <option value="gotong-royong">Gotong-royong</option>
                                        <option value="lain-lain">Lain-lain</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Tarikh Mula *</label>
                                    <input type="date" id="startDate" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Tarikh Tamat</label>
                                    <input type="date" id="endDate" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                                    <p class="text-xs text-gray-500 mt-1">Kosongkan jika aktiviti satu hari sahaja</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Masa Mula *</label>
                                    <input type="time" id="startTime" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Masa Tamat *</label>
                                    <input type="time" id="endTime" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Tempat *</label>
                                    <input type="text" id="venue" placeholder="Contoh: Bilik Mesyuarat, Dewan Sekolah" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Penganjur/PIC *</label>
                                    <input type="text" id="organizer" placeholder="Nama penganjur atau person-in-charge" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500" required>
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Objektif/Keterangan</label>
                                    <textarea id="description" rows="3" placeholder="Objektif aktiviti atau keterangan tambahan" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Form Actions -->
                        <div class="flex justify-between items-center pt-4 border-t border-gray-200">
                            <div class="text-sm text-gray-600">
                                * Medan wajib diisi
                            </div>
                            <div class="space-x-3">
                                <button type="button" onclick="clearScheduleForm()" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                                    üóëÔ∏è Kosongkan
                                </button>
                                <button type="submit" class="px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium">
                                    üíæ Daftar Jadual
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Committee Records Modal -->
    <div id="committeeRecordsModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-2xl shadow-2xl max-w-7xl w-full max-h-[90vh] overflow-y-auto">
                <!-- Modal Header -->
                <div class="bg-red-600 text-white p-6 rounded-t-2xl">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <svg class="w-8 h-8 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"/>
                            </svg>
                            <div>
                                <h2 class="text-2xl font-bold">Rekod Jawatankuasa Unit</h2>
                                <p class="text-red-100">Senarai Ahli Jawatankuasa yang Berdaftar</p>
                            </div>
                        </div>
                        <button onclick="closeCommitteeRecords()" class="text-white hover:text-gray-200 p-2">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Modal Content -->
                <div class="p-6">
                    <!-- Summary Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-orange-50 p-4 rounded-lg border border-orange-200">
                            <div class="text-orange-600 text-sm font-medium">Jumlah Jawatankuasa</div>
                            <div class="text-2xl font-bold text-orange-800" id="totalCommitteeMembers">0</div>
                        </div>
                        <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                            <div class="text-red-600 text-sm font-medium">Unit Aktif</div>
                            <div class="text-2xl font-bold text-red-800" id="activeUnits">0</div>
                        </div>
                        <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                            <div class="text-yellow-600 text-sm font-medium">Pengerusi Terbanyak</div>
                            <div class="text-lg font-bold text-yellow-800" id="mostChairpersons">-</div>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
                            <div class="text-purple-600 text-sm font-medium">Jawatankuasa Terbaru</div>
                            <div class="text-lg font-bold text-purple-800" id="latestCommittee">-</div>
                        </div>
                    </div>

                    <!-- Filter Section -->
                    <div class="bg-gray-50 rounded-lg p-4 mb-6 border border-gray-200">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">Penapis Rekod Jawatankuasa</h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Jenis</label>
                                <select id="filterCommitteeCoCurricularType" onchange="updateCommitteeUnitFilter(); filterCommitteeRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500">
                                    <option value="">Semua Jenis</option>
                                    <option value="kelab-persatuan">Kelab dan Persatuan</option>
                                    <option value="sukan-permainan">Sukan dan Permainan</option>
                                    <option value="badan-beruniform">Badan Beruniform</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Unit</label>
                                <select id="filterCommitteeUnit" onchange="filterCommitteeRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500">
                                    <option value="">Semua Unit</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Jawatan</label>
                                <select id="filterPosition" onchange="filterCommitteeRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500">
                                    <option value="">Semua Jawatan</option>
                                    <option value="pengerusi">Pengerusi</option>
                                    <option value="naib-pengerusi">Naib Pengerusi</option>
                                    <option value="setiausaha">Setiausaha</option>
                                    <option value="penolong-setiausaha">Penolong Setiausaha</option>
                                    <option value="bendahari">Bendahari</option>
                                    <option value="penolong-bendahari">Penolong Bendahari</option>
                                    <option value="ahli-jawatankuasa">Ahli Jawatankuasa</option>
                                    <option value="penasihat">Penasihat</option>
                                    <option value="guru-penyelia">Guru Penyelia</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Tingkatan</label>
                                <select id="filterCommitteeForm" onchange="filterCommitteeRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500">
                                    <option value="">Semua Tingkatan</option>
                                    <option value="1">Tingkatan 1</option>
                                    <option value="2">Tingkatan 2</option>
                                    <option value="3">Tingkatan 3</option>
                                    <option value="4">Tingkatan 4</option>
                                    <option value="5">Tingkatan 5</option>
                                    <option value="guru">Guru</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Jantina</label>
                                <select id="filterCommitteeGender" onchange="filterCommitteeRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500">
                                    <option value="">Semua Jantina</option>
                                    <option value="lelaki">Lelaki</option>
                                    <option value="perempuan">Perempuan</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Cari Ahli</label>
                                <input type="text" id="searchCommittee" placeholder="Nama atau No. K/P" onkeyup="filterCommitteeRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500">
                            </div>
                        </div>
                        <div class="mt-4 flex justify-end">
                            <button onclick="clearAllCommitteeFilters()" class="text-red-600 hover:text-red-800 text-sm font-medium flex items-center space-x-1">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                                </svg>
                                <span>Kosongkan Semua Penapis</span>
                            </button>
                        </div>
                    </div>

                    <!-- Committee List -->
                    <div class="bg-white rounded-lg border border-gray-200">
                        <div class="px-6 py-4 bg-gray-50 border-b border-gray-200 rounded-t-lg">
                            <h3 class="font-semibold text-gray-800 text-lg">Senarai Ahli Jawatankuasa</h3>
                        </div>
                        <div id="committeeList" class="p-6">
                            <div class="text-center py-12 text-gray-500">
                                <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"/>
                                </svg>
                                <p class="text-lg font-medium">Tiada ahli jawatankuasa berdaftar lagi</p>
                                <p class="text-sm">Sila daftar ahli jawatankuasa terlebih dahulu untuk melihat rekod di sini</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Schedule Records Modal -->
    <div id="scheduleRecordsModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-2xl shadow-2xl max-w-7xl w-full max-h-[90vh] overflow-y-auto">
                <!-- Modal Header -->
                <div class="bg-teal-600 text-white p-6 rounded-t-2xl">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <svg class="w-8 h-8 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"/>
                            </svg>
                            <div>
                                <h2 class="text-2xl font-bold">Rekod Jadual Aktiviti Tahunan Unit</h2>
                                <p class="text-teal-100">Senarai Jadual Aktiviti yang Telah Didaftarkan</p>
                            </div>
                        </div>
                        <button onclick="closeScheduleRecords()" class="text-white hover:text-gray-200 p-2">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Modal Content -->
                <div class="p-6">
                    <!-- Summary Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-indigo-50 p-4 rounded-lg border border-indigo-200">
                            <div class="text-indigo-600 text-sm font-medium">Jumlah Aktiviti</div>
                            <div class="text-2xl font-bold text-indigo-800" id="totalActivities">0</div>
                        </div>
                        <div class="bg-teal-50 p-4 rounded-lg border border-teal-200">
                            <div class="text-teal-600 text-sm font-medium">Unit Aktif</div>
                            <div class="text-2xl font-bold text-teal-800" id="activeScheduleUnits">0</div>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                            <div class="text-green-600 text-sm font-medium">Aktiviti Bulan Ini</div>
                            <div class="text-2xl font-bold text-green-800" id="thisMonthActivities">0</div>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                            <div class="text-blue-600 text-sm font-medium">Aktiviti Akan Datang</div>
                            <div class="text-2xl font-bold text-blue-800" id="upcomingActivities">0</div>
                        </div>
                    </div>

                    <!-- Filter Section -->
                    <div class="bg-gray-50 rounded-lg p-4 mb-6 border border-gray-200">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">Penapis Rekod Jadual</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Jenis</label>
                                <select id="filterScheduleCoCurricularType" onchange="updateScheduleUnitFilter(); filterScheduleRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                                    <option value="">Semua Jenis</option>
                                    <option value="kelab-persatuan">Kelab dan Persatuan</option>
                                    <option value="sukan-permainan">Sukan dan Permainan</option>
                                    <option value="badan-beruniform">Badan Beruniform</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Unit</label>
                                <select id="filterScheduleUnit" onchange="filterScheduleRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                                    <option value="">Semua Unit</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Tahun</label>
                                <select id="filterScheduleYear" onchange="filterScheduleRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                                    <option value="">Semua Tahun</option>
                                    <option value="2024">2024</option>
                                    <option value="2025">2025</option>
                                    <option value="2026">2026</option>
                                    <option value="2027">2027</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Jenis Aktiviti</label>
                                <select id="filterActivityCategory" onchange="filterScheduleRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                                    <option value="">Semua Jenis</option>
                                    <option value="mesyuarat">Mesyuarat</option>
                                    <option value="latihan">Latihan</option>
                                    <option value="pertandingan">Pertandingan</option>
                                    <option value="program">Program Khas</option>
                                    <option value="kursus">Kursus/Workshop</option>
                                    <option value="kempen">Kempen</option>
                                    <option value="gotong-royong">Gotong-royong</option>
                                    <option value="lain-lain">Lain-lain</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Cari Aktiviti</label>
                                <input type="text" id="searchSchedule" placeholder="Nama aktiviti" onkeyup="filterScheduleRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500">
                            </div>
                        </div>
                        <div class="mt-4 flex justify-end">
                            <button onclick="clearAllScheduleFilters()" class="text-teal-600 hover:text-teal-800 text-sm font-medium flex items-center space-x-1">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                                </svg>
                                <span>Kosongkan Semua Penapis</span>
                            </button>
                        </div>
                    </div>

                    <!-- Schedule List -->
                    <div class="bg-white rounded-lg border border-gray-200">
                        <div class="px-6 py-4 bg-gray-50 border-b border-gray-200 rounded-t-lg">
                            <h3 class="font-semibold text-gray-800 text-lg">Senarai Jadual Aktiviti</h3>
                        </div>
                        <div id="scheduleList" class="p-6">
                            <div class="text-center py-12 text-gray-500">
                                <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                </svg>
                                <p class="text-lg font-medium">Tiada jadual aktiviti berdaftar lagi</p>
                                <p class="text-sm">Sila daftar jadual aktiviti terlebih dahulu untuk melihat rekod di sini</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Financial Form Modal -->
    <div id="financialModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <!-- Modal Header -->
                <div class="bg-yellow-600 text-white p-6 rounded-t-2xl">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <svg class="w-8 h-8 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <div>
                                <h2 class="text-2xl font-bold">Borang Daftar Akaun Kewangan dan Perbelanjaan Unit</h2>
                                <p class="text-yellow-100">Pendaftaran Transaksi Kewangan Unit Kokurikulum</p>
                            </div>
                        </div>
                        <button onclick="closeFinancialForm()" class="text-white hover:text-gray-200 p-2">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Modal Content -->
                <div class="p-6">
                    <form id="financialForm" class="space-y-6">
                        <!-- Timestamp (Auto-generated) -->
                        <div class="bg-gray-100 rounded-lg p-4 border border-gray-300">
                            <div class="flex items-center">
                                <svg class="w-5 h-5 mr-2 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                                <span class="text-sm font-medium text-gray-700">Timestamp: </span>
                                <span id="financialTimestamp" class="text-sm text-gray-800 font-mono"></span>
                            </div>
                        </div>

                        <!-- Unit Information -->
                        <div class="bg-yellow-50 rounded-lg p-6 border border-yellow-200">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                                <svg class="w-5 h-5 mr-2 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"/>
                                </svg>
                                Maklumat Unit
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Jenis Kokurikulum *</label>
                                    <select id="financialCoCurricularType" onchange="updateFinancialUnitOptions()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" required>
                                        <option value="">Pilih Jenis Kokurikulum</option>
                                        <option value="kelab-persatuan">Kelab dan Persatuan</option>
                                        <option value="sukan-permainan">Sukan dan Permainan</option>
                                        <option value="badan-beruniform">Badan Beruniform</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Unit *</label>
                                    <select id="financialUnit" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" required disabled>
                                        <option value="">Pilih jenis kokurikulum dahulu</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Transaction Information -->
                        <div class="bg-gray-50 rounded-lg p-6 border border-gray-200">
                            <h4 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                                <svg class="w-5 h-5 mr-2 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                                Maklumat Transaksi
                            </h4>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Jenis Transaksi *</label>
                                    <select id="transactionType" onchange="updateTransactionFields()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" required>
                                        <option value="">Pilih Jenis Transaksi</option>
                                        <option value="pendapatan">Pendapatan (Wang Masuk)</option>
                                        <option value="perbelanjaan">Perbelanjaan (Wang Keluar)</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Tarikh Transaksi *</label>
                                    <input type="date" id="transactionDate" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Jumlah (RM) *</label>
                                    <input type="number" id="transactionAmount" step="0.01" min="0" placeholder="0.00" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Kategori *</label>
                                    <select id="transactionCategory" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" required>
                                        <option value="">Pilih jenis transaksi dahulu</option>
                                    </select>
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Keterangan/Butiran *</label>
                                    <input type="text" id="transactionDescription" placeholder="Contoh: Yuran ahli, Pembelian peralatan, Bayaran penganjuran program" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" required>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Kaedah Pembayaran *</label>
                                    <select id="paymentMethod" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500" required>
                                        <option value="">Pilih Kaedah</option>
                                        <option value="tunai">Tunai</option>
                                        <option value="cek">Cek</option>
                                        <option value="pemindahan-bank">Pemindahan Bank</option>
                                        <option value="kad-debit">Kad Debit</option>
                                        <option value="e-wallet">E-Wallet</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">No. Rujukan</label>
                                    <input type="text" id="referenceNumber" placeholder="No. cek, no. rujukan bank, dll" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500">
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Nama Penerima/Pembayar</label>
                                    <input type="text" id="payerReceiver" placeholder="Nama individu atau syarikat" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500">
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Catatan Tambahan</label>
                                    <textarea id="additionalNotes" rows="3" placeholder="Catatan atau maklumat tambahan jika ada" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Form Actions -->
                        <div class="flex justify-between items-center pt-4 border-t border-gray-200">
                            <div class="text-sm text-gray-600">
                                * Medan wajib diisi
                            </div>
                            <div class="space-x-3">
                                <button type="button" onclick="clearFinancialForm()" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                                    üóëÔ∏è Kosongkan
                                </button>
                                <button type="submit" class="px-6 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors font-medium">
                                    üíæ Simpan Transaksi
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Financial Records Modal -->
    <div id="financialRecordsModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-2xl shadow-2xl max-w-7xl w-full max-h-[90vh] overflow-y-auto">
                <!-- Modal Header -->
                <div class="bg-amber-600 text-white p-6 rounded-t-2xl">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <svg class="w-8 h-8 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                            </svg>
                            <div>
                                <h2 class="text-2xl font-bold">Rekod Akaun Kewangan dan Perbelanjaan Unit</h2>
                                <p class="text-amber-100">Senarai Transaksi Kewangan yang Telah Didaftarkan</p>
                            </div>
                        </div>
                        <button onclick="closeFinancialRecords()" class="text-white hover:text-gray-200 p-2">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Modal Content -->
                <div class="p-6">
                    <!-- Financial Summary -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                            <div class="text-green-600 text-sm font-medium">Jumlah Pendapatan</div>
                            <div class="text-2xl font-bold text-green-800">RM <span id="totalIncome">0.00</span></div>
                        </div>
                        <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                            <div class="text-red-600 text-sm font-medium">Jumlah Perbelanjaan</div>
                            <div class="text-2xl font-bold text-red-800">RM <span id="totalExpenditure">0.00</span></div>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                            <div class="text-blue-600 text-sm font-medium">Baki Semasa</div>
                            <div class="text-2xl font-bold text-blue-800">RM <span id="currentBalance">0.00</span></div>
                        </div>
                        <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                            <div class="text-yellow-600 text-sm font-medium">Jumlah Transaksi</div>
                            <div class="text-2xl font-bold text-yellow-800" id="totalTransactions">0</div>
                        </div>
                    </div>

                    <!-- Filter Section -->
                    <div class="bg-gray-50 rounded-lg p-4 mb-6 border border-gray-200">
                        <h4 class="text-lg font-semibold text-gray-800 mb-4">Penapis Rekod Kewangan</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Jenis</label>
                                <select id="filterFinancialCoCurricularType" onchange="updateFinancialUnitFilter(); filterFinancialRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                                    <option value="">Semua Jenis</option>
                                    <option value="kelab-persatuan">Kelab dan Persatuan</option>
                                    <option value="sukan-permainan">Sukan dan Permainan</option>
                                    <option value="badan-beruniform">Badan Beruniform</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Unit</label>
                                <select id="filterFinancialUnit" onchange="filterFinancialRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                                    <option value="">Semua Unit</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Jenis Transaksi</label>
                                <select id="filterTransactionType" onchange="filterFinancialRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                                    <option value="">Semua Jenis</option>
                                    <option value="pendapatan">Pendapatan</option>
                                    <option value="perbelanjaan">Perbelanjaan</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Bulan</label>
                                <select id="filterMonth" onchange="filterFinancialRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                                    <option value="">Semua Bulan</option>
                                    <option value="01">Januari</option>
                                    <option value="02">Februari</option>
                                    <option value="03">Mac</option>
                                    <option value="04">April</option>
                                    <option value="05">Mei</option>
                                    <option value="06">Jun</option>
                                    <option value="07">Julai</option>
                                    <option value="08">Ogos</option>
                                    <option value="09">September</option>
                                    <option value="10">Oktober</option>
                                    <option value="11">November</option>
                                    <option value="12">Disember</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Tahun</label>
                                <select id="filterYear" onchange="filterFinancialRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                                    <option value="">Semua Tahun</option>
                                    <option value="2024">2024</option>
                                    <option value="2025">2025</option>
                                    <option value="2026">2026</option>
                                    <option value="2027">2027</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Cari</label>
                                <input type="text" id="searchFinancial" placeholder="Keterangan" onkeyup="filterFinancialRecords()" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500">
                            </div>
                        </div>
                        <div class="mt-4 flex justify-end">
                            <button onclick="clearAllFinancialFilters()" class="text-amber-600 hover:text-amber-800 text-sm font-medium flex items-center space-x-1">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                                </svg>
                                <span>Kosongkan Semua Penapis</span>
                            </button>
                        </div>
                    </div>

                    <!-- Financial Records List -->
                    <div class="bg-white rounded-lg border border-gray-200">
                        <div class="px-6 py-4 bg-gray-50 border-b border-gray-200 rounded-t-lg">
                            <h3 class="font-semibold text-gray-800 text-lg">Senarai Transaksi Kewangan</h3>
                        </div>
                        <div id="financialList" class="p-6">
                            <div class="text-center py-12 text-gray-500">
                                <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                                <p class="text-lg font-medium">Tiada transaksi kewangan berdaftar lagi</p>
                                <p class="text-sm">Sila daftar transaksi kewangan terlebih dahulu untuk melihat rekod di sini</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Attendance Records Modal -->
    <div id="attendanceRecordsModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-2xl shadow-2xl max-w-7xl w-full max-h-[90vh] overflow-y-auto">
                <!-- Modal Header -->
                <div class="bg-purple-600 text-white p-6 rounded-t-2xl">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <svg class="w-8 h-8 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                            </svg>
                            <div>
                                <h2 class="text-2xl font-bold">Rekod Kehadiran</h2>
                                <p class="text-purple-100">Senarai Kehadiran Pelajar yang Telah Disimpan</p>
                            </div>
                        </div>
                        <button onclick="closeAttendanceRecords()" class="text-white hover:text-gray-200 p-2">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Modal Content -->
                <div class="p-6">
                    <!-- Summary Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                            <div class="text-blue-600 text-sm font-medium">Jumlah Rekod</div>
                            <div class="text-2xl font-bold text-blue-800" id="totalRecords">0</div>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                            <div class="text-green-600 text-sm font-medium">Jumlah Pelajar</div>
                            <div class="text-2xl font-bold text-green-800" id="totalStudentsInRecords">0</div>
                        </div>
                        <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                            <div class="text-yellow-600 text-sm font-medium">Aktiviti Terbanyak</div>
                            <div class="text-lg font-bold text-yellow-800" id="mostPopularActivity">-</div>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
                            <div class="text-purple-600 text-sm font-medium">Rekod Terkini</div>
                            <div class="text-lg font-bold text-purple-800" id="latestRecord">-</div>
                        </div>
                    </div>

                    <!-- Records List -->
                    <div class="bg-white rounded-lg border border-gray-200">
                        <div class="px-6 py-4 bg-gray-50 border-b border-gray-200 rounded-t-lg">
                            <h3 class="font-semibold text-gray-800 text-lg">Senarai Rekod Kehadiran</h3>
                        </div>
                        <div id="recordsList" class="p-6">
                            <div class="text-center py-12 text-gray-500">
                                <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                </svg>
                                <p class="text-lg font-medium">Tiada rekod kehadiran lagi</p>
                                <p class="text-sm">Sila daftar kehadiran terlebih dahulu untuk melihat rekod di sini</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let membershipData = JSON.parse(localStorage.getItem('membershipData')) || [];
        let attendanceRecords = JSON.parse(localStorage.getItem('attendanceRecords')) || [];
        let committeeData = JSON.parse(localStorage.getItem('committeeData')) || [];
        let scheduleData = JSON.parse(localStorage.getItem('scheduleData')) || [];
        let financialData = JSON.parse(localStorage.getItem('financialData')) || [];
        let attendanceList = [];

        // Co-curricular data
        const coCurricularUnits = {
            'kelab-persatuan': [
                'Kelab Sains',
                'Kelab Matematik',
                'Kelab Bahasa Inggeris',
                'Kelab Bahasa Melayu',
                'Persatuan Sejarah',
                'Kelab Geografi',
                'Kelab Komputer',
                'Kelab Robotik'
            ],
            'sukan-permainan': [
                'Badminton',
                'Bola Sepak',
                'Bola Keranjang',
                'Bola Tampar',
                'Ping Pong',
                'Tenis',
                'Ragbi',
                'Hoki'
            ],
            'badan-beruniform': [
                'Kadet Polis',
                'Kadet Bomba',
                'Pengakap',
                'Pandu Puteri',
                'Kadet Bersatu',
                'St. John Ambulans'
            ]
        };

        // Class data
        const classData = {
            '1': ['1 Hikmah', '1 Fatonah', '1 Amanah', '1 Hasanah'],
            '2': ['2 Hikmah', '2 Fatonah', '2 Amanah', '2 Hasanah'],
            '3': ['3 Hikmah', '3 Fatonah', '3 Amanah', '3 Hasanah'],
            '4': ['4 Taqwa', '4 Fatonah', '4 Amanah', '4 Syariah'],
            '5': ['5 Taqwa', '5 Fatonah', '5 Amanah', '5 Syariah']
        };

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Set current date for attendance form
            const today = new Date().toISOString().split('T')[0];
            if (document.getElementById('attendanceDate')) {
                document.getElementById('attendanceDate').value = today;
            }
            
            // Set current time for attendance form
            const now = new Date();
            const currentTime = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
            if (document.getElementById('attendanceTime')) {
                document.getElementById('attendanceTime').value = currentTime;
            }

            // Update timestamps
            updateTimestamps();
        });

        // Update timestamps
        function updateTimestamps() {
            const now = new Date();
            const timestamp = now.toLocaleString('ms-MY', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            
            if (document.getElementById('memberTimestamp')) {
                document.getElementById('memberTimestamp').textContent = timestamp;
            }
            if (document.getElementById('committeeTimestamp')) {
                document.getElementById('committeeTimestamp').textContent = timestamp;
            }
            if (document.getElementById('scheduleTimestamp')) {
                document.getElementById('scheduleTimestamp').textContent = timestamp;
            }
            if (document.getElementById('financialTimestamp')) {
                document.getElementById('financialTimestamp').textContent = timestamp;
            }
        }

        // Modal functions
        function openMembershipForm() {
            document.getElementById('membershipModal').classList.remove('hidden');
            updateTimestamps();
        }

        function closeMembershipForm() {
            document.getElementById('membershipModal').classList.add('hidden');
        }

        function openAttendanceForm() {
            document.getElementById('attendanceModal').classList.remove('hidden');
        }

        function closeAttendanceForm() {
            document.getElementById('attendanceModal').classList.add('hidden');
        }

        function openMembershipRecords() {
            document.getElementById('membershipRecordsModal').classList.remove('hidden');
            displayMembershipRecords();
        }

        function closeMembershipRecords() {
            document.getElementById('membershipRecordsModal').classList.add('hidden');
        }

        function openAttendanceRecords() {
            document.getElementById('attendanceRecordsModal').classList.remove('hidden');
            displayAttendanceRecords();
        }

        function closeAttendanceRecords() {
            document.getElementById('attendanceRecordsModal').classList.add('hidden');
        }

        function openFinancialForm() {
            document.getElementById('financialModal').classList.remove('hidden');
            updateTimestamps();
            // Set current date
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('transactionDate').value = today;
        }

        function closeFinancialForm() {
            document.getElementById('financialModal').classList.add('hidden');
        }

        function openFinancialRecords() {
            document.getElementById('financialRecordsModal').classList.remove('hidden');
            displayFinancialRecords();
        }

        function closeFinancialRecords() {
            document.getElementById('financialRecordsModal').classList.add('hidden');
        }

        function openCommitteeForm() {
            document.getElementById('committeeModal').classList.remove('hidden');
            updateTimestamps();
        }

        function closeCommitteeForm() {
            document.getElementById('committeeModal').classList.add('hidden');
        }

        function openCommitteeRecords() {
            document.getElementById('committeeRecordsModal').classList.remove('hidden');
            displayCommitteeRecords();
        }

        function closeCommitteeRecords() {
            document.getElementById('committeeRecordsModal').classList.add('hidden');
        }

        function openScheduleForm() {
            document.getElementById('scheduleModal').classList.remove('hidden');
            updateTimestamps();
        }

        function closeScheduleForm() {
            document.getElementById('scheduleModal').classList.add('hidden');
        }

        function openScheduleRecords() {
            document.getElementById('scheduleRecordsModal').classList.remove('hidden');
            displayScheduleRecords();
        }

        function closeScheduleRecords() {
            document.getElementById('scheduleRecordsModal').classList.add('hidden');
        }

        // Update unit options based on co-curricular type
        function updateUnitOptions() {
            const typeSelect = document.getElementById('memberCoCurricularType');
            const unitSelect = document.getElementById('memberUnit');
            
            const selectedType = typeSelect.value;
            
            // Clear existing options
            unitSelect.innerHTML = '<option value="">Pilih Unit</option>';
            
            if (selectedType && coCurricularUnits[selectedType]) {
                unitSelect.disabled = false;
                coCurricularUnits[selectedType].forEach(unit => {
                    const option = document.createElement('option');
                    option.value = unit.toLowerCase().replace(/\s+/g, '-');
                    option.textContent = unit;
                    unitSelect.appendChild(option);
                });
            } else {
                unitSelect.disabled = true;
                unitSelect.innerHTML = '<option value="">Pilih jenis kokurikulum dahulu</option>';
            }
        }

        // Update class options based on form
        function updateClassOptions() {
            const formSelect = document.getElementById('memberForm');
            const classSelect = document.getElementById('memberClass');
            
            const selectedForm = formSelect.value;
            
            // Clear existing options
            classSelect.innerHTML = '<option value="">Pilih Kelas</option>';
            
            if (selectedForm && classData[selectedForm]) {
                classSelect.disabled = false;
                classData[selectedForm].forEach(className => {
                    const option = document.createElement('option');
                    option.value = className;
                    option.textContent = className;
                    classSelect.appendChild(option);
                });
            } else {
                classSelect.disabled = true;
                classSelect.innerHTML = '<option value="">Pilih tingkatan dahulu</option>';
            }
        }

        // Committee form functions
        function updateCommitteeUnitOptions() {
            const typeSelect = document.getElementById('committeeCoCurricularType');
            const unitSelect = document.getElementById('committeeUnit');
            
            const selectedType = typeSelect.value;
            
            // Clear existing options
            unitSelect.innerHTML = '<option value="">Pilih Unit</option>';
            
            if (selectedType && coCurricularUnits[selectedType]) {
                unitSelect.disabled = false;
                coCurricularUnits[selectedType].forEach(unit => {
                    const option = document.createElement('option');
                    option.value = unit.toLowerCase().replace(/\s+/g, '-');
                    option.textContent = unit;
                    unitSelect.appendChild(option);
                });
            } else {
                unitSelect.disabled = true;
                unitSelect.innerHTML = '<option value="">Pilih jenis kokurikulum dahulu</option>';
            }
        }

        function updateCommitteeClassOptions() {
            const formSelect = document.getElementById('committeeForm');
            const classSelect = document.getElementById('committeeClass');
            
            const selectedForm = formSelect.value;
            
            // Clear existing options
            classSelect.innerHTML = '<option value="">Pilih Kelas</option>';
            
            if (selectedForm === 'guru') {
                classSelect.disabled = false;
                const option = document.createElement('option');
                option.value = 'Guru';
                option.textContent = 'Guru';
                classSelect.appendChild(option);
            } else if (selectedForm && classData[selectedForm]) {
                classSelect.disabled = false;
                classData[selectedForm].forEach(className => {
                    const option = document.createElement('option');
                    option.value = className;
                    option.textContent = className;
                    classSelect.appendChild(option);
                });
            } else {
                classSelect.disabled = true;
                classSelect.innerHTML = '<option value="">Pilih tingkatan dahulu</option>';
            }
        }

        function clearCommitteeForm() {
            document.getElementById('committeeForm').reset();
            document.getElementById('committeeUnit').disabled = true;
            document.getElementById('committeeUnit').innerHTML = '<option value="">Pilih jenis kokurikulum dahulu</option>';
            document.getElementById('committeeClass').disabled = true;
            document.getElementById('committeeClass').innerHTML = '<option value="">Pilih tingkatan dahulu</option>';
            updateTimestamps();
        }

        // Schedule form functions
        function updateScheduleUnitOptions() {
            const typeSelect = document.getElementById('scheduleCoCurricularType');
            const unitSelect = document.getElementById('scheduleUnit');
            
            const selectedType = typeSelect.value;
            
            // Clear existing options
            unitSelect.innerHTML = '<option value="">Pilih Unit</option>';
            
            if (selectedType && coCurricularUnits[selectedType]) {
                unitSelect.disabled = false;
                coCurricularUnits[selectedType].forEach(unit => {
                    const option = document.createElement('option');
                    option.value = unit.toLowerCase().replace(/\s+/g, '-');
                    option.textContent = unit;
                    unitSelect.appendChild(option);
                });
            } else {
                unitSelect.disabled = true;
                unitSelect.innerHTML = '<option value="">Pilih jenis kokurikulum dahulu</option>';
            }
        }

        function clearScheduleForm() {
            document.getElementById('scheduleForm').reset();
            document.getElementById('scheduleUnit').disabled = true;
            document.getElementById('scheduleUnit').innerHTML = '<option value="">Pilih jenis kokurikulum dahulu</option>';
            updateTimestamps();
        }

        // Financial form functions
        function updateFinancialUnitOptions() {
            const typeSelect = document.getElementById('financialCoCurricularType');
            const unitSelect = document.getElementById('financialUnit');
            
            const selectedType = typeSelect.value;
            
            // Clear existing options
            unitSelect.innerHTML = '<option value="">Pilih Unit</option>';
            
            if (selectedType && coCurricularUnits[selectedType]) {
                unitSelect.disabled = false;
                coCurricularUnits[selectedType].forEach(unit => {
                    const option = document.createElement('option');
                    option.value = unit.toLowerCase().replace(/\s+/g, '-');
                    option.textContent = unit;
                    unitSelect.appendChild(option);
                });
            } else {
                unitSelect.disabled = true;
                unitSelect.innerHTML = '<option value="">Pilih jenis kokurikulum dahulu</option>';
            }
        }

        function updateTransactionFields() {
            const transactionType = document.getElementById('transactionType').value;
            const categorySelect = document.getElementById('transactionCategory');
            
            // Clear existing options
            categorySelect.innerHTML = '<option value="">Pilih Kategori</option>';
            
            if (transactionType === 'pendapatan') {
                const incomeCategories = [
                    'Yuran Ahli',
                    'Derma',
                    'Geran',
                    'Hasil Jualan',
                    'Sumbangan',
                    'Hadiah/Anugerah',
                    'Lain-lain Pendapatan'
                ];
                
                incomeCategories.forEach(category => {
                    const option = document.createElement('option');
                    option.value = category.toLowerCase().replace(/\s+/g, '-');
                    option.textContent = category;
                    categorySelect.appendChild(option);
                });
            } else if (transactionType === 'perbelanjaan') {
                const expenseCategories = [
                    'Peralatan dan Kelengkapan',
                    'Pengangkutan',
                    'Makanan dan Minuman',
                    'Bahan Mentah',
                    'Yuran dan Bayaran',
                    'Hadiah dan Anugerah',
                    'Percetakan dan Alat Tulis',
                    'Penyelenggaraan',
                    'Lain-lain Perbelanjaan'
                ];
                
                expenseCategories.forEach(category => {
                    const option = document.createElement('option');
                    option.value = category.toLowerCase().replace(/\s+/g, '-');
                    option.textContent = category;
                    categorySelect.appendChild(option);
                });
            }
        }

        function clearFinancialForm() {
            document.getElementById('financialForm').reset();
            document.getElementById('financialUnit').disabled = true;
            document.getElementById('financialUnit').innerHTML = '<option value="">Pilih jenis kokurikulum dahulu</option>';
            document.getElementById('transactionCategory').innerHTML = '<option value="">Pilih jenis transaksi dahulu</option>';
            updateTimestamps();
            // Set current date
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('transactionDate').value = today;
        }

        // Clear membership form
        function clearMembershipForm() {
            document.getElementById('membershipForm').reset();
            document.getElementById('memberUnit').disabled = true;
            document.getElementById('memberUnit').innerHTML = '<option value="">Pilih jenis kokurikulum dahulu</option>';
            document.getElementById('memberClass').disabled = true;
            document.getElementById('memberClass').innerHTML = '<option value="">Pilih tingkatan dahulu</option>';
            updateTimestamps();
        }

        // Handle membership form submission
        document.getElementById('membershipForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                id: Date.now(),
                timestamp: document.getElementById('memberTimestamp').textContent,
                coCurricularType: document.getElementById('memberCoCurricularType').value,
                unit: document.getElementById('memberUnit').value,
                form: document.getElementById('memberForm').value,
                class: document.getElementById('memberClass').value,
                name: document.getElementById('memberName').value,
                gender: document.getElementById('memberGender').value,
                icNumber: document.getElementById('memberId').value,
                parentPhone: document.getElementById('memberParentPhone').value
            };
            
            // Add to membership data
            membershipData.push(formData);
            localStorage.setItem('membershipData', JSON.stringify(membershipData));
            
            // Show success message
            alert('Ahli berjaya didaftarkan!');
            
            // Clear form
            clearMembershipForm();
            
            // Close modal
            closeMembershipForm();
        });

        // Handle committee form submission
        document.getElementById('committeeForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                id: Date.now(),
                timestamp: document.getElementById('committeeTimestamp').textContent,
                coCurricularType: document.getElementById('committeeCoCurricularType').value,
                unit: document.getElementById('committeeUnit').value,
                position: document.getElementById('committeePosition').value,
                name: document.getElementById('committeeName').value,
                form: document.getElementById('committeeForm').value,
                class: document.getElementById('committeeClass').value,
                gender: document.getElementById('committeeGender').value,
                icNumber: document.getElementById('committeeId').value,
                phone: document.getElementById('committeePhone').value
            };
            
            // Add to committee data
            committeeData.push(formData);
            localStorage.setItem('committeeData', JSON.stringify(committeeData));
            
            // Show success message
            alert('Ahli jawatankuasa berjaya didaftarkan!');
            
            // Clear form
            clearCommitteeForm();
            
            // Close modal
            closeCommitteeForm();
        });

        // Handle schedule form submission
        document.getElementById('scheduleForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                id: Date.now(),
                timestamp: document.getElementById('scheduleTimestamp').textContent,
                coCurricularType: document.getElementById('scheduleCoCurricularType').value,
                unit: document.getElementById('scheduleUnit').value,
                year: document.getElementById('scheduleYear').value,
                activityName: document.getElementById('activityName').value,
                activityCategory: document.getElementById('activityCategory').value,
                startDate: document.getElementById('startDate').value,
                endDate: document.getElementById('endDate').value,
                startTime: document.getElementById('startTime').value,
                endTime: document.getElementById('endTime').value,
                venue: document.getElementById('venue').value,
                organizer: document.getElementById('organizer').value,
                description: document.getElementById('description').value
            };
            
            // Add to schedule data
            scheduleData.push(formData);
            localStorage.setItem('scheduleData', JSON.stringify(scheduleData));
            
            // Show success message
            alert('Jadual aktiviti berjaya didaftarkan!');
            
            // Clear form
            clearScheduleForm();
            
            // Close modal
            closeScheduleForm();
        });

        // Handle financial form submission
        document.getElementById('financialForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                id: Date.now(),
                timestamp: document.getElementById('financialTimestamp').textContent,
                coCurricularType: document.getElementById('financialCoCurricularType').value,
                unit: document.getElementById('financialUnit').value,
                transactionType: document.getElementById('transactionType').value,
                transactionDate: document.getElementById('transactionDate').value,
                amount: parseFloat(document.getElementById('transactionAmount').value),
                category: document.getElementById('transactionCategory').value,
                description: document.getElementById('transactionDescription').value,
                paymentMethod: document.getElementById('paymentMethod').value,
                referenceNumber: document.getElementById('referenceNumber').value,
                payerReceiver: document.getElementById('payerReceiver').value,
                additionalNotes: document.getElementById('additionalNotes').value
            };
            
            // Add to financial data
            financialData.push(formData);
            localStorage.setItem('financialData', JSON.stringify(financialData));
            
            // Show success message
            alert('Transaksi kewangan berjaya disimpan!');
            
            // Clear form
            clearFinancialForm();
            
            // Close modal
            closeFinancialForm();
        });

        // Attendance form functions
        function switchToSelectMode() {
            document.getElementById('selectFromListBtn').className = 'px-4 py-2 text-sm font-medium rounded-md bg-blue-600 text-white';
            document.getElementById('manualEntryBtn').className = 'px-4 py-2 text-sm font-medium rounded-md text-gray-600 hover:text-gray-800';
            document.getElementById('selectFromListMode').classList.remove('hidden');
            document.getElementById('manualEntryMode').classList.add('hidden');
        }

        function switchToManualMode() {
            document.getElementById('manualEntryBtn').className = 'px-4 py-2 text-sm font-medium rounded-md bg-blue-600 text-white';
            document.getElementById('selectFromListBtn').className = 'px-4 py-2 text-sm font-medium rounded-md text-gray-600 hover:text-gray-800';
            document.getElementById('manualEntryMode').classList.remove('hidden');
            document.getElementById('selectFromListMode').classList.add('hidden');
        }

        // Add student manually
        function addStudentManually() {
            const name = document.getElementById('studentName').value;
            const id = document.getElementById('studentId').value;
            const studentClass = document.getElementById('studentClass').value;
            
            if (!name || !id || !studentClass) {
                alert('Sila lengkapkan semua maklumat pelajar');
                return;
            }
            
            const student = {
                name: name,
                id: id,
                class: studentClass,
                present: true
            };
            
            attendanceList.push(student);
            updateAttendanceDisplay();
            
            // Clear form
            document.getElementById('studentName').value = '';
            document.getElementById('studentId').value = '';
            document.getElementById('studentClass').value = '';
        }

        // Update attendance display
        function updateAttendanceDisplay() {
            const container = document.getElementById('attendanceList');
            const totalElement = document.getElementById('totalStudents');
            
            if (attendanceList.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">Belum ada pelajar didaftarkan. Sila tambah pelajar di atas.</p>';
                totalElement.textContent = '0';
                return;
            }
            
            let html = '<div class="space-y-2">';
            attendanceList.forEach((student, index) => {
                html += `
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg border">
                        <div class="flex items-center space-x-3">
                            <span class="text-sm font-medium text-gray-600">${index + 1}.</span>
                            <div>
                                <div class="font-medium text-gray-800">${student.name}</div>
                                <div class="text-sm text-gray-600">${student.class} ‚Ä¢ ${student.id}</div>
                            </div>
                        </div>
                        <button onclick="removeStudent(${index})" class="text-red-600 hover:text-red-800 p-1">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                            </svg>
                        </button>
                    </div>
                `;
            });
            html += '</div>';
            
            container.innerHTML = html;
            totalElement.textContent = attendanceList.length;
        }

        // Remove student from attendance list
        function removeStudent(index) {
            attendanceList.splice(index, 1);
            updateAttendanceDisplay();
        }

        // Clear attendance form
        function clearForm() {
            document.getElementById('attendanceForm').reset();
            attendanceList = [];
            updateAttendanceDisplay();
            
            // Reset date and time
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('attendanceDate').value = today;
            
            const now = new Date();
            const currentTime = now.getHours().toString().padStart(2, '0') + ':' + now.getMinutes().toString().padStart(2, '0');
            document.getElementById('attendanceTime').value = currentTime;
        }

        // Handle attendance form submission
        document.getElementById('attendanceForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (attendanceList.length === 0) {
                alert('Sila tambah sekurang-kurangnya seorang pelajar');
                return;
            }
            
            const record = {
                id: Date.now(),
                date: document.getElementById('attendanceDate').value,
                activity: document.getElementById('activityType').value,
                time: document.getElementById('attendanceTime').value,
                students: [...attendanceList],
                timestamp: new Date().toISOString()
            };
            
            attendanceRecords.push(record);
            localStorage.setItem('attendanceRecords', JSON.stringify(attendanceRecords));
            
            alert(`Kehadiran berjaya disimpan! ${attendanceList.length} pelajar didaftarkan.`);
            
            clearForm();
            closeAttendanceForm();
        });

        // Display membership records
        function displayMembershipRecords() {
            const container = document.getElementById('membersList');
            
            if (membershipData.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-12 text-gray-500">
                        <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 515.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 919.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                        </svg>
                        <p class="text-lg font-medium">Tiada ahli berdaftar lagi</p>
                        <p class="text-sm">Sila daftar ahli baru terlebih dahulu untuk melihat rekod di sini</p>
                    </div>
                `;
                
                // Update stats
                document.getElementById('totalMembers').textContent = '0';
                document.getElementById('activeMembers').textContent = '0';
                document.getElementById('popularActivity').textContent = '-';
                document.getElementById('latestMember').textContent = '-';
                return;
            }
            
            // Update stats
            document.getElementById('totalMembers').textContent = membershipData.length;
            document.getElementById('activeMembers').textContent = membershipData.length;
            
            // Find most popular activity
            const activityCount = {};
            membershipData.forEach(member => {
                const unit = member.unit;
                activityCount[unit] = (activityCount[unit] || 0) + 1;
            });
            
            const popularActivity = Object.keys(activityCount).reduce((a, b) => 
                activityCount[a] > activityCount[b] ? a : b, Object.keys(activityCount)[0] || '-'
            );
            
            document.getElementById('popularActivity').textContent = popularActivity || '-';
            
            // Latest member
            const latestMember = membershipData[membershipData.length - 1];
            document.getElementById('latestMember').textContent = latestMember ? latestMember.name : '-';
            
            // Display members
            let html = '<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">';
            membershipData.forEach(member => {
                html += `
                    <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center space-x-2">
                                <div class="w-8 h-8 bg-emerald-100 rounded-full flex items-center justify-center">
                                    <span class="text-emerald-600 font-medium text-sm">${member.name.charAt(0)}</span>
                                </div>
                                <div>
                                    <div class="font-medium text-gray-800">${member.name}</div>
                                    <div class="text-xs text-gray-500">${member.class}</div>
                                </div>
                            </div>
                            <span class="px-2 py-1 bg-emerald-100 text-emerald-800 text-xs rounded-full font-medium">
                                ${member.gender === 'lelaki' ? '‚ôÇ' : '‚ôÄ'}
                            </span>
                        </div>
                        <div class="space-y-1 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Unit:</span>
                                <span class="font-medium">${member.unit}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">No. K/P:</span>
                                <span class="font-mono text-xs">${member.icNumber}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Tel. Ibu/Bapa:</span>
                                <span class="font-mono text-xs">${member.parentPhone}</span>
                            </div>
                        </div>
                    </div>
                `;
            });
            html += '</div>';
            
            container.innerHTML = html;
        }

        // Display attendance records
        function displayAttendanceRecords() {
            const container = document.getElementById('recordsList');
            
            if (attendanceRecords.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-12 text-gray-500">
                        <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        <p class="text-lg font-medium">Tiada rekod kehadiran lagi</p>
                        <p class="text-sm">Sila daftar kehadiran terlebih dahulu untuk melihat rekod di sini</p>
                    </div>
                `;
                
                // Update stats
                document.getElementById('totalRecords').textContent = '0';
                document.getElementById('totalStudentsInRecords').textContent = '0';
                document.getElementById('mostPopularActivity').textContent = '-';
                document.getElementById('latestRecord').textContent = '-';
                return;
            }
            
            // Update stats
            document.getElementById('totalRecords').textContent = attendanceRecords.length;
            
            const totalStudents = attendanceRecords.reduce((sum, record) => sum + record.students.length, 0);
            document.getElementById('totalStudentsInRecords').textContent = totalStudents;
            
            // Find most popular activity
            const activityCount = {};
            attendanceRecords.forEach(record => {
                activityCount[record.activity] = (activityCount[record.activity] || 0) + 1;
            });
            
            const popularActivity = Object.keys(activityCount).reduce((a, b) => 
                activityCount[a] > activityCount[b] ? a : b, Object.keys(activityCount)[0] || '-'
            );
            
            document.getElementById('mostPopularActivity').textContent = popularActivity || '-';
            
            // Latest record
            const latestRecord = attendanceRecords[attendanceRecords.length - 1];
            document.getElementById('latestRecord').textContent = latestRecord ? 
                new Date(latestRecord.timestamp).toLocaleDateString('ms-MY') : '-';
            
            // Display records
            let html = '<div class="space-y-4">';
            attendanceRecords.reverse().forEach(record => {
                html += `
                    <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                        <div class="flex items-center justify-between mb-3">
                            <div>
                                <h4 class="font-medium text-gray-800">${record.activity}</h4>
                                <p class="text-sm text-gray-600">${record.date} ‚Ä¢ ${record.time}</p>
                            </div>
                            <span class="px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full font-medium">
                                ${record.students.length} pelajar
                            </span>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2">
                            ${record.students.map(student => `
                                <div class="text-sm bg-white p-2 rounded border">
                                    <div class="font-medium">${student.name}</div>
                                    <div class="text-gray-600">${student.class}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });
            html += '</div>';
            
            container.innerHTML = html;
        }

        // Display committee records
        function displayCommitteeRecords() {
            const container = document.getElementById('committeeList');
            
            if (committeeData.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-12 text-gray-500">
                        <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"/>
                        </svg>
                        <p class="text-lg font-medium">Tiada ahli jawatankuasa berdaftar lagi</p>
                        <p class="text-sm">Sila daftar ahli jawatankuasa terlebih dahulu untuk melihat rekod di sini</p>
                    </div>
                `;
                
                // Update stats
                document.getElementById('totalCommitteeMembers').textContent = '0';
                document.getElementById('activeUnits').textContent = '0';
                document.getElementById('mostChairpersons').textContent = '-';
                document.getElementById('latestCommittee').textContent = '-';
                return;
            }
            
            // Update stats
            document.getElementById('totalCommitteeMembers').textContent = committeeData.length;
            
            // Count active units
            const uniqueUnits = [...new Set(committeeData.map(member => member.unit))];
            document.getElementById('activeUnits').textContent = uniqueUnits.length;
            
            // Find unit with most chairpersons
            const chairpersons = committeeData.filter(member => member.position === 'pengerusi');
            const unitCount = {};
            chairpersons.forEach(member => {
                unitCount[member.unit] = (unitCount[member.unit] || 0) + 1;
            });
            
            const mostChairpersons = Object.keys(unitCount).reduce((a, b) => 
                unitCount[a] > unitCount[b] ? a : b, Object.keys(unitCount)[0] || '-'
            );
            
            document.getElementById('mostChairpersons').textContent = mostChairpersons || '-';
            
            // Latest committee member
            const latestCommittee = committeeData[committeeData.length - 1];
            document.getElementById('latestCommittee').textContent = latestCommittee ? latestCommittee.name : '-';
            
            // Display committee members
            let html = '<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">';
            committeeData.forEach(member => {
                const positionBadgeColor = getPositionBadgeColor(member.position);
                html += `
                    <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                        <div class="flex items-center justify-between mb-3">
                            <div class="flex items-center space-x-2">
                                <div class="w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center">
                                    <span class="text-orange-600 font-medium text-sm">${member.name.charAt(0)}</span>
                                </div>
                                <div>
                                    <div class="font-medium text-gray-800">${member.name}</div>
                                    <div class="text-xs text-gray-500">${member.class}</div>
                                </div>
                            </div>
                            <span class="px-2 py-1 ${positionBadgeColor} text-xs rounded-full font-medium">
                                ${getPositionDisplayName(member.position)}
                            </span>
                        </div>
                        <div class="space-y-1 text-sm">
                            <div class="flex justify-between">
                                <span class="text-gray-600">Unit:</span>
                                <span class="font-medium">${member.unit}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Jantina:</span>
                                <span class="font-medium">${member.gender === 'lelaki' ? '‚ôÇ Lelaki' : '‚ôÄ Perempuan'}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">No. K/P:</span>
                                <span class="font-mono text-xs">${member.icNumber}</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-gray-600">Tel:</span>
                                <span class="font-mono text-xs">${member.phone}</span>
                            </div>
                        </div>
                    </div>
                `;
            });
            html += '</div>';
            
            container.innerHTML = html;
        }

        function getPositionBadgeColor(position) {
            const colors = {
                'pengerusi': 'bg-red-100 text-red-800',
                'naib-pengerusi': 'bg-orange-100 text-orange-800',
                'setiausaha': 'bg-blue-100 text-blue-800',
                'penolong-setiausaha': 'bg-cyan-100 text-cyan-800',
                'bendahari': 'bg-green-100 text-green-800',
                'penolong-bendahari': 'bg-emerald-100 text-emerald-800',
                'ahli-jawatankuasa': 'bg-gray-100 text-gray-800',
                'penasihat': 'bg-purple-100 text-purple-800',
                'guru-penyelia': 'bg-indigo-100 text-indigo-800'
            };
            return colors[position] || 'bg-gray-100 text-gray-800';
        }

        function getPositionDisplayName(position) {
            const names = {
                'pengerusi': 'Pengerusi',
                'naib-pengerusi': 'Naib Pengerusi',
                'setiausaha': 'Setiausaha',
                'penolong-setiausaha': 'Penolong Setiausaha',
                'bendahari': 'Bendahari',
                'penolong-bendahari': 'Penolong Bendahari',
                'ahli-jawatankuasa': 'Ahli Jawatankuasa',
                'penasihat': 'Penasihat',
                'guru-penyelia': 'Guru Penyelia'
            };
            return names[position] || position;
        }

        // Display schedule records
        function displayScheduleRecords() {
            const container = document.getElementById('scheduleList');
            
            if (scheduleData.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-12 text-gray-500">
                        <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                        <p class="text-lg font-medium">Tiada jadual aktiviti berdaftar lagi</p>
                        <p class="text-sm">Sila daftar jadual aktiviti terlebih dahulu untuk melihat rekod di sini</p>
                    </div>
                `;
                
                // Update stats
                document.getElementById('totalActivities').textContent = '0';
                document.getElementById('activeScheduleUnits').textContent = '0';
                document.getElementById('thisMonthActivities').textContent = '0';
                document.getElementById('upcomingActivities').textContent = '0';
                return;
            }
            
            // Update stats
            document.getElementById('totalActivities').textContent = scheduleData.length;
            
            // Count active units
            const uniqueUnits = [...new Set(scheduleData.map(activity => activity.unit))];
            document.getElementById('activeScheduleUnits').textContent = uniqueUnits.length;
            
            // Count this month activities
            const currentMonth = new Date().getMonth();
            const currentYear = new Date().getFullYear();
            const thisMonthCount = scheduleData.filter(activity => {
                const activityDate = new Date(activity.startDate);
                return activityDate.getMonth() === currentMonth && activityDate.getFullYear() === currentYear;
            }).length;
            document.getElementById('thisMonthActivities').textContent = thisMonthCount;
            
            // Count upcoming activities
            const today = new Date();
            const upcomingCount = scheduleData.filter(activity => {
                const activityDate = new Date(activity.startDate);
                return activityDate >= today;
            }).length;
            document.getElementById('upcomingActivities').textContent = upcomingCount;
            
            // Display activities
            let html = '<div class="space-y-4">';
            scheduleData.sort((a, b) => new Date(a.startDate) - new Date(b.startDate)).forEach(activity => {
                const startDate = new Date(activity.startDate);
                const endDate = activity.endDate ? new Date(activity.endDate) : null;
                const isUpcoming = startDate >= today;
                const categoryBadgeColor = getActivityCategoryBadgeColor(activity.activityCategory);
                
                html += `
                    <div class="bg-gray-50 rounded-lg p-4 border border-gray-200 ${isUpcoming ? 'border-l-4 border-l-green-500' : ''}">
                        <div class="flex items-start justify-between mb-3">
                            <div class="flex-1">
                                <div class="flex items-center space-x-2 mb-2">
                                    <h4 class="font-medium text-gray-800 text-lg">${activity.activityName}</h4>
                                    <span class="px-2 py-1 ${categoryBadgeColor} text-xs rounded-full font-medium">
                                        ${getActivityCategoryDisplayName(activity.activityCategory)}
                                    </span>
                                    ${isUpcoming ? '<span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full font-medium">Akan Datang</span>' : ''}
                                </div>
                                <p class="text-sm text-gray-600 mb-2">${activity.unit} ‚Ä¢ ${activity.year}</p>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <span class="font-medium text-gray-700">Tarikh:</span>
                                        <span class="text-gray-600">
                                            ${startDate.toLocaleDateString('ms-MY')}
                                            ${endDate ? ' - ' + endDate.toLocaleDateString('ms-MY') : ''}
                                        </span>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Masa:</span>
                                        <span class="text-gray-600">${activity.startTime} - ${activity.endTime}</span>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Tempat:</span>
                                        <span class="text-gray-600">${activity.venue}</span>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Penganjur:</span>
                                        <span class="text-gray-600">${activity.organizer}</span>
                                    </div>
                                </div>
                                ${activity.description ? `
                                    <div class="mt-2">
                                        <span class="font-medium text-gray-700">Keterangan:</span>
                                        <p class="text-gray-600 text-sm mt-1">${activity.description}</p>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `;
            });
            html += '</div>';
            
            container.innerHTML = html;
        }

        function getActivityCategoryBadgeColor(category) {
            const colors = {
                'mesyuarat': 'bg-blue-100 text-blue-800',
                'latihan': 'bg-green-100 text-green-800',
                'pertandingan': 'bg-red-100 text-red-800',
                'program': 'bg-purple-100 text-purple-800',
                'kursus': 'bg-yellow-100 text-yellow-800',
                'kempen': 'bg-orange-100 text-orange-800',
                'gotong-royong': 'bg-teal-100 text-teal-800',
                'lain-lain': 'bg-gray-100 text-gray-800'
            };
            return colors[category] || 'bg-gray-100 text-gray-800';
        }

        function getActivityCategoryDisplayName(category) {
            const names = {
                'mesyuarat': 'Mesyuarat',
                'latihan': 'Latihan',
                'pertandingan': 'Pertandingan',
                'program': 'Program Khas',
                'kursus': 'Kursus/Workshop',
                'kempen': 'Kempen',
                'gotong-royong': 'Gotong-royong',
                'lain-lain': 'Lain-lain'
            };
            return names[category] || category;
        }

        // Schedule filter functions (placeholder - can be implemented similar to membership filters)
        function updateScheduleUnitFilter() {
            // Implementation similar to membership filters
        }

        function filterScheduleRecords() {
            // Implementation similar to membership filters
        }

        function clearAllScheduleFilters() {
            // Implementation similar to membership filters
        }

        // Committee filter functions (placeholder - can be implemented similar to membership filters)
        function updateCommitteeUnitFilter() {
            // Implementation similar to membership filters
        }

        function filterCommitteeRecords() {
            // Implementation similar to membership filters
        }

        function clearAllCommitteeFilters() {
            // Implementation similar to membership filters
        }

        // Display financial records
        function displayFinancialRecords() {
            const container = document.getElementById('financialList');
            
            if (financialData.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-12 text-gray-500">
                        <svg class="w-16 h-16 mx-auto mb-4 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <p class="text-lg font-medium">Tiada transaksi kewangan berdaftar lagi</p>
                        <p class="text-sm">Sila daftar transaksi kewangan terlebih dahulu untuk melihat rekod di sini</p>
                    </div>
                `;
                
                // Update stats
                document.getElementById('totalIncome').textContent = '0.00';
                document.getElementById('totalExpenditure').textContent = '0.00';
                document.getElementById('currentBalance').textContent = '0.00';
                document.getElementById('totalTransactions').textContent = '0';
                return;
            }
            
            // Calculate financial summary
            let totalIncome = 0;
            let totalExpenditure = 0;
            
            financialData.forEach(transaction => {
                if (transaction.transactionType === 'pendapatan') {
                    totalIncome += transaction.amount;
                } else if (transaction.transactionType === 'perbelanjaan') {
                    totalExpenditure += transaction.amount;
                }
            });
            
            const currentBalance = totalIncome - totalExpenditure;
            
            // Update stats
            document.getElementById('totalIncome').textContent = totalIncome.toFixed(2);
            document.getElementById('totalExpenditure').textContent = totalExpenditure.toFixed(2);
            document.getElementById('currentBalance').textContent = currentBalance.toFixed(2);
            document.getElementById('totalTransactions').textContent = financialData.length;
            
            // Display transactions
            let html = '<div class="space-y-4">';
            financialData.sort((a, b) => new Date(b.transactionDate) - new Date(a.transactionDate)).forEach(transaction => {
                const transactionDate = new Date(transaction.transactionDate);
                const isIncome = transaction.transactionType === 'pendapatan';
                const amountColor = isIncome ? 'text-green-600' : 'text-red-600';
                const amountPrefix = isIncome ? '+' : '-';
                const badgeColor = isIncome ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800';
                
                html += `
                    <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                        <div class="flex items-start justify-between mb-3">
                            <div class="flex-1">
                                <div class="flex items-center space-x-2 mb-2">
                                    <h4 class="font-medium text-gray-800 text-lg">${transaction.description}</h4>
                                    <span class="px-2 py-1 ${badgeColor} text-xs rounded-full font-medium">
                                        ${isIncome ? 'Pendapatan' : 'Perbelanjaan'}
                                    </span>
                                </div>
                                <p class="text-sm text-gray-600 mb-2">${transaction.unit} ‚Ä¢ ${transactionDate.toLocaleDateString('ms-MY')}</p>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                                    <div>
                                        <span class="font-medium text-gray-700">Kategori:</span>
                                        <span class="text-gray-600">${transaction.category}</span>
                                    </div>
                                    <div>
                                        <span class="font-medium text-gray-700">Kaedah Bayaran:</span>
                                        <span class="text-gray-600">${transaction.paymentMethod}</span>
                                    </div>
                                    ${transaction.referenceNumber ? `
                                        <div>
                                            <span class="font-medium text-gray-700">No. Rujukan:</span>
                                            <span class="text-gray-600">${transaction.referenceNumber}</span>
                                        </div>
                                    ` : ''}
                                    ${transaction.payerReceiver ? `
                                        <div>
                                            <span class="font-medium text-gray-700">${isIncome ? 'Pembayar' : 'Penerima'}:</span>
                                            <span class="text-gray-600">${transaction.payerReceiver}</span>
                                        </div>
                                    ` : ''}
                                </div>
                                ${transaction.additionalNotes ? `
                                    <div class="mt-2">
                                        <span class="font-medium text-gray-700">Catatan:</span>
                                        <p class="text-gray-600 text-sm mt-1">${transaction.additionalNotes}</p>
                                    </div>
                                ` : ''}
                            </div>
                            <div class="text-right ml-4">
                                <div class="text-2xl font-bold ${amountColor}">
                                    ${amountPrefix}RM ${transaction.amount.toFixed(2)}
                                </div>
                                <div class="text-xs text-gray-500 mt-1">
                                    ${new Date(transaction.timestamp).toLocaleString('ms-MY')}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            html += '</div>';
            
            container.innerHTML = html;
        }

        // Financial filter functions (placeholder - can be implemented similar to other filters)
        function updateFinancialUnitFilter() {
            // Implementation similar to other filters
        }

        function filterFinancialRecords() {
            // Implementation similar to other filters
        }

        function clearAllFinancialFilters() {
            // Implementation similar to other filters
        }

        // Close modals when clicking outside
        window.addEventListener('click', function(e) {
            const modals = ['membershipModal', 'attendanceModal', 'membershipRecordsModal', 'attendanceRecordsModal', 'committeeModal', 'committeeRecordsModal', 'scheduleModal', 'scheduleRecordsModal', 'financialModal', 'financialRecordsModal'];
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (e.target === modal) {
                    modal.classList.add('hidden');
                }
            });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97a3dd4534fb1fe1',t:'MTc1NzA1NTc4MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
